<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>PHP Web Sockets With Ratchet</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Pusher Server -->
        <script src="https://rawgit.com/cboden/fcae978cfc016d506639c5241f94e772/raw/e974ce895df527c83b8e010124a034cfcf6c9f4b/autobahn.js"></script>
    </head>
    <body>
    
    <script>
        // Socket Server
        // var conn = new WebSocket('ws://localhost:8080');
        // conn.onopen = function(e) {
        //     console.log("Connection established!");
        // };

        // conn.onmessage = function(e) {
        //     console.log(e.data);
        // };

        // Pusher Server
        var conn = new ab.Session('ws://localhost:8080',
        function socketCon() {
                conn.subscribe('kittensCategory', function(topic, data) {
                    // This is where you would add the new article to the DOM (beyond the scope of this tutorial)
                    console.log('New article published to category "' + topic + '" : ' + data.title);
                });
            },
            function() {
                console.warn('WebSocket connection closed');
            },
            {'skipSubprotocolCheck': true}
        );
        
    </script>
    </body>
</html>